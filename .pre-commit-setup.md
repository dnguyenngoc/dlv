# Pre-commit Setup Guide

## Installation

### Option 1: Using pre-commit framework (Recommended)

```bash
# Install pre-commit
pip3 install pre-commit

# Install hooks
pre-commit install

# Test it
pre-commit run --all-files
```

### Option 2: Using Docker (No installation needed)

The `.git/hooks/pre-commit` file already includes Docker-based checks. Just commit and it will run automatically!

## What gets checked?

- ✅ Go formatting (gofmt)
- ✅ Go linting (golangci-lint)
- ✅ YAML linting
- ✅ Dockerfile linting
- ✅ Trailing whitespace
- ✅ End of file fixer
- ✅ Large files check
- ✅ Merge conflict check

## Manual run

```bash
# Run all hooks
pre-commit run --all-files

# Run specific hook
pre-commit run gofmt --all-files

# Run on staged files only
pre-commit run
```

## Skip hooks (if needed)

```bash
# Skip pre-commit hooks
git commit --no-verify -m "Emergency fix"
```

## Troubleshooting

### Pre-commit hooks installed but some checks fail locally?

This is normal! The hooks are configured to run checks automatically:
- ✅ **YAML/JSON checks** - Work immediately (no extra tools needed)
- ⚠️ **Go checks** - May fail locally if Go isn't in PATH (will work in CI/CD)
- ⚠️ **Docker checks** - Need Docker daemon running (will work in CI/CD)

### Options to run all checks locally:

1. **Add Go to PATH** (for Go checks):
   ```bash
   # Check if Go is installed
   which go

   # If not, install Go or add to PATH
   export PATH=$PATH:/path/to/go/bin
   ```

2. **Start Docker** (for Docker checks):
   ```bash
   # Start Docker Desktop
   open -a Docker
   ```

3. **Rely on CI/CD** (recommended):
   - Just commit normally
   - CI/CD will run all checks
   - Fix any issues found in CI

### Force commit (skip hooks):

```bash
# Skip pre-commit hooks if needed
git commit --no-verify -m "Emergency fix"
```
